var RelativeStrengthCalculator;!function(t){t.appName="RelativeStrengthCalculator"}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){"use strict";angular.module(t.appName,["ui.router","ngMaterial","md.data.table"])}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){var e=function(){function t(t){t.html5Mode(!0)}return t.$inject=["$locationProvider"],t}(),a=function(){function t(t,e){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"}),e.otherwise("/")}return t.$inject=["$stateProvider","$urlRouterProvider"],t}(),r=function(){function t(t){t.theme("default").primaryPalette("blue-grey")}return t.$inject=["$mdThemingProvider"],t}();angular.module(t.appName).config(e).config(a).config(r)}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){var e=function(){function t(){this.male=["1","male"],this.female=["2","female"]}return t.prototype.isValid=function(t){return null!=this.parse(t)},t.prototype.parse=function(t){var e=this;if(!t)return null;var a=[],r=t.split(/\r\n|\r|\n/g);return _.forEach(r,function(t){if(!t)return!0;var r=e.buildRecord(t),n=e.parseRecord(r);return null==n?(a=null,!1):(a.push(n),!0)}),a},t.prototype.buildRecord=function(t){return t?t.split(","):null},t.prototype.parseRecord=function(t){if(!t)return null;if(3!==t.length&&4!==t.length)return null;var e=this.defaultRequest(this.getValue(t,0));return e.sex=this.parseSex(this.getValue(t,1)),e.bodyWeight=parseFloat(this.getValue(t,2)),4===t.length&&(e.weight=parseFloat(this.getValue(t,3))),!e.sex||isNaN(e.bodyWeight)||isNaN(e.weight)?null:e},t.prototype.getValue=function(t,e){return t[e]?t[e].trim():""},t.prototype.parseSex=function(t){var e=t.toLowerCase();return _.contains(this.male,e)?"1":_.contains(this.female,e)?"2":null},t.prototype.defaultRequest=function(t){return{id:t,sex:"0",bodyWeight:0,weight:0}},t.id="calculationInputParser",t}();t.CalculationInputParser=e,angular.module(t.appName).service(e.id,e)}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){var e=function(){function t(t){this.calculationInputParser=t}return t.$inject=["calculationInputParser"],t.id="CalculatorInputValidatorController",t}(),a=function(){function t(){this.restrict="A",this.controller=e,this.require=[t.id,"ngModel"]}return t.factory=function(){return new t},t.prototype.link=function(t,e,a,r){var n=r[0],l=r[1];l.$validators.calculatorInput=function(t){return n.calculationInputParser.isValid(t)}},t.id="rscCalculatorInputValidator",t}();angular.module(t.appName).directive(a.id,a.factory)}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){"use strict";var e=function(){function t(t,e){var a=this;this.relativeStrengthService=t,this.calculationInputParser=e,this.loading=!0,this.metaData=null,this.weightUnits=1,this.formula=1,this.metaData=t.metaData(),this.metaData.$promise["finally"](function(){a.loading=!1})}return t.$inject=["relativeStrengthService","calculationInputParser"],t.prototype.calc=function(t){var e=this.calculationInputParser.parse(t);this.results=this.relativeStrengthService.results(this.formula,this.weightUnits,e)},t.id="MainController",t}();t.MainController=e,angular.module(t.appName).controller(e.id,e)}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){var e=function(){function t(t,e){this.$q=t,this.$http=e}return t.$inject=["$q","$http"],Object.defineProperty(t.prototype,"baseUrl",{get:function(){return"http://rscalc.azurewebsites.net/"},enumerable:!0,configurable:!0}),t.prototype.buildRequestUrl=function(t,e){if(!t)throw new Error("formula is falesy");if(!e)throw new Error("weightUnits is falesy");return""+this.baseUrl+t+"/"+e},t.prototype.metaData=function(){var t=this.$q.defer(),e={formulas:{},weightUnits:{},sexes:{},$promise:t.promise};return this.$q.all([this.$http.get(""+this.baseUrl+"api/metadata/formulas"),this.$http.get(""+this.baseUrl+"api/metadata/weightUnits"),this.$http.get(""+this.baseUrl+"api/metadata/sexes")]).then(function(a){e.formulas=a[0].data,e.weightUnits=a[1].data,e.sexes=a[2].data,t.resolve(e)})["catch"](function(e){t.reject(e)}),e},t.prototype.results=function(t,e,a){var r=this.$q.defer(),n=[];return n.$promise=this.$http.post(this.buildRequestUrl(t,e),a),n.$promise.then(function(t){angular.copy(t.data,n),r.resolve(n)})["catch"](function(t){r.reject(t)}),n},t.id="relativeStrengthService",t}();t.RelativeStrengthService=e,angular.module(t.appName).service(e.id,e)}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){function e(t){return a[t]}var a;!function(t){t[t.Male=1]="Male",t[t.Female=2]="Female"}(a||(a={})),angular.module(t.appName).filter("sex",function(){return e})}(RelativeStrengthCalculator||(RelativeStrengthCalculator={}));var RelativeStrengthCalculator;!function(t){"use strict";var e=function(){function t(t){t.date=new Date}return t.$inject=["$scope"],t.$inject=["$scope"],t}();t.NavbarCtrl=e,angular.module(t.appName).controller("NavbarCtrl",e)}(RelativeStrengthCalculator||(RelativeStrengthCalculator={})),angular.module("RelativeStrengthCalculator").run(["$templateCache",function(t){t.put("app/main/main.html",'<md-content layout="column" layout-align="center center" ng-cloak=""><div ng-show="vm.loading" class="loading" layout-padding=""><h1 class="md-title">Loading...</h1><div layout="row" layout-sm="column" layout-align="center center"><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div></div><div ng-hide="vm.loading" layout-padding=""><form name="calcForm" novalidate="" ng-if="!vm.results"><div layout="row"><md-select ng-model="vm.formula" placeholder="Formula" required=""><md-option ng-repeat="(key, value) in vm.metaData.formulas" value="{{key}}">{{value}}</md-option></md-select><md-select ng-model="vm.weightUnits" placeholder="Weight Units" required=""><md-option ng-repeat="(key, value) in vm.metaData.weightUnits" value="{{key}}">{{value}}</md-option></md-select></div><div layout="column"><md-input-container flex=""><label>Calculations in the form of:<br>Name 2,Sex,Body Weight,Weight (Optional)<br>Name 2,Sex,Body Weight,Weight (Optional)</label> <textarea ng-model="vm.calculations" required="" rsc-calculator-input-validator=""></textarea></md-input-container></div><div layout="row" layout-align="start center"><md-button class="md-raised md-primary" ng-disabled="calcForm.$invalid" ng-click="vm.calc(vm.calculations)">Calculate</md-button></div></form><div ng-if="vm.results.length > 0"><md-data-table-container><table md-data-table=""><thead md-order="query.order" md-trigger="onOrderChange"><tr><th>Id</th><th>Sex</th><th>Body Weight</th><th>Weight</th><th>Coefficient</th><th>Score</th></tr></thead><tbody><tr ng-repeat="r in :: vm.results track by $index"><td>{{r.id}}</td><td>{{r.sex | sex}}</td><td>{{r.bodyWeight}}</td><td>{{r.weight}}</td><td><span>{{r.coefficient | number:3}}<md-tooltip md-direction="right">{{r.coefficient}}</md-tooltip></span></td><td><span>{{r.score | number:3}}<md-tooltip md-direction="right">{{r.score}}</md-tooltip></span></td></tr></tbody></table></md-data-table-container><md-data-table-toolbar layout-align="start"><md-button class="md-raised md-primary" ng-disabled="calcForm.$invalid" ng-click="vm.results = null;">Edit</md-button>Count {{vm.results.length}}<br></md-data-table-toolbar></div></div></md-content>'),t.put("app/components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="start center">Relative Strength Calculator</md-toolbar>')}]);